<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Catálogo MAC FOR-T & MAC PRO 2025</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Catálogo General MAC FOR-T & MAC PRO 2025</h1>
    <p class="slogan">“Soluciones reales para proyectos exigentes – MAC FOR-T siempre a tu lado”</p>
  </header>

  <main>
    <!-- Filtros -->
    <section class="filtros">
      <label for="tipoCliente">Selecciona tu tipo de cliente:</label>
      <select id="tipoCliente">
        <option value="">-- Selecciona --</option>
        <option value="Distribuidor">Distribuidor</option>
        <option value="Mayorista">Mayorista</option>
        <option value="ClienteFinal">Cliente Final</option>
        <option value="Licitacion">Licitación</option>
      </select>
    </section>

    <!-- Productos (sin precios) -->
    <section class="productos" id="listaProductos">
      <!-- Aquí se cargan los productos desde Google Sheets -->
    </section>

    <!-- Formulario para solicitar PIN -->
    <section id="formularioSecreto" class="oculto">
      <h2>Completa el formulario para solicitar acceso</h2>
      <form id="formularioDatos">
        <input type="text" placeholder="Nombre completo" required id="nombre" />
        <input type="text" placeholder="WhatsApp (+591...)" required id="whatsapp" />
        <input type="text" placeholder="Ciudad o región" required id="ciudad" />
        <input type="text" placeholder="Empresa (opcional)" id="empresa" />
        <input type="text" placeholder="Cargo que ocupa" required id="cargo" />
        <input type="text" placeholder="Rubro del negocio o empresa" required id="rubro" />
        <button type="submit">Solicitar PIN por WhatsApp</button>
      </form>
    </section>

    <!-- Ingreso del PIN -->
    <section id="ingresarPin" class="oculto">
      <h2>Ingresa el PIN que te enviamos por WhatsApp</h2>
      <input type="text" id="inputPin" placeholder="Ej: 123456" />
      <button onclick="validarPin()">Ver precios</button>
    </section>

    <!-- Cotizador -->
    <section id="cotizador" class="oculto">
      <h2>Solicita cotización</h2>
      <div id="carritoProductos"></div>
      <label for="cantidad">Cantidad estimada por producto:</label>
      <input type="number" id="cantidad" min="1" placeholder="Cantidad (opcional)" />
      <button onclick="enviarCotizacion()">Solicitar cotización vía WhatsApp</button>
    </section>
  </main>

  <script>
    // Datos simulados de ejemplo: puedes reemplazar esto con datos reales desde Google Sheets
    const productos = [
      { id: 1, nombre: "Escalera Multipropósito 4x4", categoria: "Escaleras", imagen: "img/escalera44.jpg" },
      { id: 2, nombre: "Grampa para Malla Tipo U", categoria: "Grampas", imagen: "img/grampa-u.jpg" }
    ];

    // Renderizar productos
    const lista = document.getElementById("listaProductos");
    productos.forEach(p => {
      const div = document.createElement("div");
      div.className = "producto";
      div.innerHTML = `
        <img src="${p.imagen}" alt="${p.nombre}" />
        <h3>${p.nombre}</h3>
        <button onclick="agregarAlCarrito('${p.nombre}')">Agregar para cotizar</button>
      `;
      lista.appendChild(div);
    });

    // Mostrar formulario cuando se selecciona tipo de cliente
    document.getElementById("tipoCliente").addEventListener("change", () => {
      document.getElementById("formularioSecreto").classList.remove("oculto");
    });

    // Enviar PIN por WhatsApp (simulación)
    document.getElementById("formularioDatos").addEventListener("submit", function(e) {
      e.preventDefault();
      const nombre = document.getElementById("nombre").value;
      const whatsapp = document.getElementById("whatsapp").value;
      const mensaje = `Hola, soy ${nombre}. Solicito mi PIN para ver los precios del catálogo.`;
      window.open(`https://wa.me/591${whatsapp.replace("+591", "")}?text=${encodeURIComponent(mensaje)}`);
      document.getElementById("ingresarPin").classList.remove("oculto");
    });

    // Validar PIN
    function validarPin() {
      const pin = document.getElementById("inputPin").value;
      if (pin === "123456") {
        alert("¡Acceso concedido!");
        document.getElementById("cotizador").classList.remove("oculto");
      } else {
        alert("PIN incorrecto");
      }
    }

    // Carrito de productos
    let carrito = [];
    function agregarAlCarrito(nombre) {
      carrito.push(nombre);
      document.getElementById("carritoProductos").innerHTML = carrito.map(item => `<li>${item}</li>`).join("");
    }

    function enviarCotizacion() {
      const cantidad = document.getElementById("cantidad").value;
      const mensaje = `Hola, solicito cotización para:\n${carrito.map(item => `- ${item}${cantidad ? ` x${cantidad}` : ""}`).join("\n")}`;
      window.open(`https://wa.me/59168099278?text=${encodeURIComponent(mensaje)}`);
    }
  </script>

  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f4f4f4; }
    header { text-align: center; background: #002244; color: white; padding: 20px; }
    .slogan { font-style: italic; }
    .producto { background: white; padding: 10px; margin: 10px; border-radius: 10px; box-shadow: 0 0 10px #ccc; display: inline-block; width: 200px; vertical-align: top; }
    .producto img { width: 100%; height: auto; }
    .oculto { display: none; }
    input, select, button { margin: 5px 0; padding: 8px; width: 100%; }
    section { margin-top: 30px; }
  </style>
</body>
</html>
