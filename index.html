<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Catálogo MAC FOR-T & MAC PRO 2025</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>Catálogo General MAC FOR-T & MAC PRO 2025</h1>
    <p class="slogan">“Soluciones reales para proyectos exigentes – MAC FOR-T siempre a tu lado”</p>
  </header>

  <main>
    <section class="filtros">
      <label for="tipoCliente">Selecciona tu tipo de cliente:</label>
      <select id="tipoCliente">
        <option value="">-- Selecciona --</option>
        <option value="Distribuidor">Distribuidor</option>
        <option value="Mayorista">Mayorista</option>
        <option value="ClienteFinal">Cliente Final</option>
        <option value="Licitacion">Licitación</option>
      </select>
    </section>

    <section class="productos" id="listaProductos">
      <!-- Aquí se cargan los productos desde Google Sheets -->
    </section>

    <section id="formularioSecreto" class="oculto">
      <h2>Completa el formulario para solicitar acceso</h2>
      <form id="formularioDatos">
        <input type="text" placeholder="Nombre completo" required id="nombre" />
        <input type="text" placeholder="WhatsApp (+591...)" required id="whatsapp" />
        <input type="text" placeholder="Ciudad o región" required id="ciudad" />
        <input type="text" placeholder="Empresa (opcional)" id="empresa" />
        <input type="text" placeholder="Cargo que ocupa" required id="cargo" />
        <input type="text" placeholder="Rubro del negocio o empresa" required id="rubro" />
        <button type="submit">Solicitar PIN por WhatsApp</button>
      </form>
    </section>
<section id="ingresarPin" class="oculto">
  <h2>Ingresa el PIN que te enviamos por WhatsApp</h2>
  <input type="text" id="codigoPin" placeholder="Ej: 1234" required />
  <button onclick="validarPin()">Ver precios</button>
</section>

<section id="cotizador" class="oculto">
  <h2>Productos seleccionados para cotización</h2>
  <ul id="listaCotizacion"></ul>
  <label for="cantidadProductos">Cantidad por ítem (opcional):</label>
  <input type="number" id="cantidadProductos" placeholder="Ej: 5" min="1" />
  <button onclick="enviarCotizacion()">Solicitar cotización por WhatsApp</button>
</section>

<script>
  const pinValido = "2025"; // <-- Aquí defines tú el PIN general

  function validarPin() {
    const pinIngresado = document.getElementById("codigoPin").value;
    if (pinIngresado === pinValido) {
      document.querySelectorAll(".precio").forEach(el => el.classList.remove("oculto"));
      document.getElementById("cotizador").classList.remove("oculto");
      alert("¡Acceso concedido! Ya puedes ver los precios.");
    } else {
      alert("PIN incorrecto. Solicita tu PIN por WhatsApp.");
    }
  }

  // Agregar a cotización
  function agregarACotizacion(nombreProducto) {
    const lista = document.getElementById("listaCotizacion");
    const li = document.createElement("li");
    li.textContent = nombreProducto;
    lista.appendChild(li);
  }

  // Enviar a WhatsApp
  function enviarCotizacion() {
    const productos = [...document.querySelectorAll("#listaCotizacion li")].map(li => li.textContent);
    const cantidad = document.getElementById("cantidadProductos").value || "N/D";
    const mensaje = `Hola, deseo cotizar los siguientes productos:\n\n${productos.map(p => `- ${p} (Cantidad: ${cantidad})`).join('\n')}\n\nMi nombre es: ${document.getElementById("nombre").value}`;
    window.open(`https://wa.me/59168099278?text=${encodeURIComponent(mensaje)}`, "_blank");
  }
</script>
